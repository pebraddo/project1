---
title: "Data Processing"
format: html
editor: visual
---

```{r}
library(tidyverse)
library(tidycensus)
```

```{r}
url_census <- 'api.census.gov/data/2022/acs/acs1/pums?get=SEX,PWGTP,MAR&SCHL=24'
census_info <- httr::GET(url_census)
str(census_info, max.level = 1)
```

```{r}
library(jsonlite)
parsed <- fromJSON(rawToChar(census_info$content))
content_info <- as_tibble(parsed)
colnames(content_info) <- c('SEX', 'PWGTP', 'MAR', 'SCHL')
content_info <- content_info[-1,]
content_info
```

```{r}
user_changes <- function(x=2022, num_var=c('AGEP','PWGTP'), cat_var='SEX', geo_level='All') {
  if (is.numeric(x))
    if (x %in% (2010:2022))
      next
  else
    stop('first argument expects a four digit year value')
      
    if (num_var %!in% c('AGEP','GASP','GRPIP','JWAP','JWDP','JWMNP'))
      return('PWGTP')
    else 
      return(num_var, 'PWGTP')
    if (cat_var %in% c('FER','HHL','HISPEED','JWTRNS','SCH','SCHL','SEX'))
        return(as.factor(cat_var))
      else
        stop('please specify a categorical variable as at least one of the following: FER, HHL, HISPEED, JWTRNS, SCH, SCHL, SEX')
    if (geo_level %in% c('All','Region','Division','State'))
      return(geo_level)
    else
      stop('please specify a geography level as one of the following: All, Region, Division, State')

}
```
