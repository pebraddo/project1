[
  {
    "objectID": "Data Processing.html",
    "href": "Data Processing.html",
    "title": "Data Processing",
    "section": "",
    "text": "library(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(tidycensus)\n\n\nurl_census &lt;- 'api.census.gov/data/2022/acs/acs1/pums?get=SEX,PWGTP,MAR&SCHL=24'\ncensus_info &lt;- httr::GET(url_census)\nstr(census_info, max.level = 1)\n\nList of 10\n $ url        : chr \"https://api.census.gov/data/2022/acs/acs1/pums?get=SEX,PWGTP,MAR&SCHL=24\"\n $ status_code: int 200\n $ headers    :List of 12\n  ..- attr(*, \"class\")= chr [1:2] \"insensitive\" \"list\"\n $ all_headers:List of 2\n $ cookies    :'data.frame':    1 obs. of  7 variables:\n $ content    : raw [1:937508] 5b 5b 22 53 ...\n $ date       : POSIXct[1:1], format: \"2025-09-23 01:38:52\"\n $ times      : Named num [1:6] 0.1127 0.0646 0.1047 0.155 0.4042 ...\n  ..- attr(*, \"names\")= chr [1:6] \"redirect\" \"namelookup\" \"connect\" \"pretransfer\" ...\n $ request    :List of 7\n  ..- attr(*, \"class\")= chr \"request\"\n $ handle     :Class 'curl_handle' &lt;externalptr&gt; \n - attr(*, \"class\")= chr \"response\"\n\n\n\nlibrary(jsonlite)\n\n\nAttaching package: 'jsonlite'\n\n\nThe following object is masked from 'package:purrr':\n\n    flatten\n\nparsed &lt;- fromJSON(rawToChar(census_info$content))\ncontent_info &lt;- as_tibble(parsed)\n\nWarning: The `x` argument of `as_tibble.matrix()` must have unique column names if\n`.name_repair` is omitted as of tibble 2.0.0.\nℹ Using compatibility `.name_repair`.\n\ncolnames(content_info) &lt;- c('SEX', 'PWGTP', 'MAR', 'SCHL')\ncontent_info &lt;- content_info[-1,]\ncontent_info\n\n# A tibble: 44,079 × 4\n   SEX   PWGTP MAR   SCHL \n   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;\n 1 2     6     5     24   \n 2 2     23    2     24   \n 3 1     23    3     24   \n 4 1     80    5     24   \n 5 1     16    1     24   \n 6 1     107   3     24   \n 7 2     10    5     24   \n 8 1     22    1     24   \n 9 2     127   5     24   \n10 2     46    5     24   \n# ℹ 44,069 more rows\n\n\n\nuser_changes &lt;- function(x=2022, num_var=c('AGEP','PWGTP'), cat_var='SEX', geo_level='All') {\n  if (is.numeric(x))\n    if (x %in% (2010:2022))\n      next\n  else\n    stop('first argument expects a four digit year value')\n      \n    if (num_var %!in% c('AGEP','GASP','GRPIP','JWAP','JWDP','JWMNP'))\n      return('PWGTP')\n    else \n      return(num_var, 'PWGTP')\n    if (cat_var %in% c('FER','HHL','HISPEED','JWTRNS','SCH','SCHL','SEX'))\n        return(as.factor(cat_var))\n      else\n        stop('please specify a categorical variable as at least one of the following: FER, HHL, HISPEED, JWTRNS, SCH, SCHL, SEX')\n    if (geo_level %in% c('All','Region','Division','State'))\n      return(geo_level)\n    else\n      stop('please specify a geography level as one of the following: All, Region, Division, State')\n\n}"
  }
]